{"version":3,"sources":["app/components/register/login/Login.js"],"names":["Login","props","api","axios","create","baseURL","history","useHistory","loginUser","a","post","inputs","then","res","token","data","access","decoded","jwtDecode","alert","role","push","window","setTimeout","location","reload","bind","localStorage","setItem","catch","err","console","log","useState","username","password","setInputs","submitted","setSubmitted","handleChange","event","target","name","value","className","id","onSubmit","preventDefault","htmlFor","onChange","type","placeholder","to"],"mappings":"gOAsFeA,UAjFf,SAAeC,GACX,IAAMC,EAAMC,IAAMC,OAAO,CACrBC,QAAQ,mEAERC,EAAUC,cACRC,EAAS,uCAAG,sBAAAC,EAAA,sEACEP,EAAIQ,KAAK,IAAKC,GACzBC,MAAK,SAAAC,GACF,IAAMC,EAAQD,EAAIE,KAAKC,OACnBC,EAAUC,YAAUJ,GACxBK,MAAM,qBACe,UAAjBF,EAAQG,OACRd,EAAQe,KAAK,eACbC,OAAOC,WAAWD,OAAOE,SAASC,OAAOC,KAAKJ,OAAOE,UAAW,KAE/C,SAAjBP,EAAQG,OACRd,EAAQe,KAAK,UACbC,OAAOC,WAAWD,OAAOE,SAASC,OAAOC,KAAKJ,OAAOE,UAAW,KAEpEG,aAAaC,QAAQ,QAASd,MAEjCe,OAAM,SAAAC,GACHC,QAAQC,IAAIF,MAjBN,yDAAH,qDALG,EAiCUG,mBAAS,CACjCC,SAAU,GACVC,SAAU,KAnCI,mBAiCXxB,EAjCW,KAiCHyB,EAjCG,OAqCgBH,oBAAS,GArCzB,mBAqCXI,EArCW,KAqCAC,EArCA,KAsCVJ,EAAuBvB,EAAvBuB,SAAUC,EAAaxB,EAAbwB,SAClB,SAASI,EAAaC,GAAO,IAAD,EACAA,EAAMC,OAAtBC,EADgB,EAChBA,KAAMC,EADU,EACVA,MACdP,GAAU,SAAAzB,GAAM,kCAAUA,GAAV,kBAAmB+B,EAAOC,OAa9C,OACI,sBAAKC,UAAU,YAAf,UACI,uBAAMC,GAAG,aAAaD,UAAU,OAAOE,SAb/C,SAAsBN,GAClBA,EAAMO,iBACNT,GAAa,GACTJ,GAAYC,IACZC,EAAUzB,GACVoB,QAAQC,IAAIrB,GACZH,MAOA,UACI,+CACA,sBAAKoC,UAAW,gBAAmBP,IAAcH,EAAY,SAAW,KAAxE,UACI,uBAAOc,QAAQ,WAAf,sBACA,uBAAON,KAAK,WAAWC,MAAOT,EAAUe,SAAUV,EAAcW,KAAK,OAAOL,GAAG,iBAAiBM,YAAY,mBAC5G,wDAEJ,sBAAKP,UAAW,gBAAmBP,IAAcF,EAAY,SAAW,KAAxE,UACI,uBAAOa,QAAQ,WAAf,sBACA,uBAAON,KAAK,WAAWC,MAAOR,EAAUc,SAAUV,EAAcW,KAAK,WAAWL,GAAG,iBAAiBM,YAAY,mBAChH,wDAEJ,wBAAQD,KAAK,SAAb,uBAGJ,sBAAKN,UAAU,QAAf,UACI,cAAC,IAAD,CAAMQ,GAAG,IAAIR,UAAU,WAAvB,kBACA,cAAC,IAAD,CAAMQ,GAAG,YAAYR,UAAU,WAA/B,8B","file":"static/js/14.1a246d01.chunk.js","sourcesContent":["import axios from 'axios';\r\nimport jwtDecode from 'jwt-decode';\r\nimport React, { useState } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport './../css/register.css';\r\nfunction Login(props) {\r\n    const api = axios.create({\r\n        baseURL: `http://phucnb-django-example.herokuapp.com/api/user/auth/login`\r\n    });\r\n    let history = useHistory();\r\n    const loginUser = async () => {\r\n        let res = await api.post('/', inputs)\r\n            .then(res => {\r\n                const token = res.data.access;\r\n                let decoded = jwtDecode(token);\r\n                alert('submit thanh cong');\r\n                if (decoded.role === 'admin') {\r\n                    history.push('/admin/user');\r\n                    window.setTimeout(window.location.reload.bind(window.location), 10);\r\n                }\r\n                if (decoded.role === 'user') {\r\n                    history.push('/carts');\r\n                    window.setTimeout(window.location.reload.bind(window.location), 10);\r\n                }\r\n                localStorage.setItem(\"token\", token);   \r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n                \r\n            });\r\n        \r\n    };\r\n    // Bước 1: khai báo State - gồm 2 phần tử input và setInput.\r\n    // Bước 2: khai báo inputs = {} object.\r\n    // Bước 3: function handleChange(e), nhận 2 trường name, value;\r\n    // Bước 4: onChange - khi input thay đổi thì gọi handleChange()\r\n    // Bước 5: setInputs(giá trị input => ({...inputs, [name]: value))\r\n    // Bước 6: Khi nhấn Submit => \r\n    const [inputs, setInputs] = useState({\r\n        username: \"\",\r\n        password: \"\"\r\n    });\r\n    const [submitted, setSubmitted] = useState(false);\r\n    const { username, password } = inputs;\r\n    function handleChange(event){\r\n        const { name, value } = event.target;\r\n        setInputs(inputs => ({ ...inputs, [name]: value }));\r\n    }\r\n    function handleSubmit(event) {\r\n        event.preventDefault();\r\n        setSubmitted(true);\r\n        if (username && password) {\r\n            setInputs(inputs);\r\n            console.log(inputs);\r\n            loginUser();\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <form id=\"form-login\" className=\"form\" onSubmit={handleSubmit}>\r\n                <h2>Login With Us</h2>\r\n                <div className={'form-control' + ((submitted && !username) ? ' error' : ' ')}>\r\n                    <label htmlFor=\"username\">Username</label>\r\n                    <input name=\"username\" value={username} onChange={handleChange} type=\"text\" id=\"username-login\" placeholder=\"Enter username\" />\r\n                    <small>Error username !</small>\r\n                </div>\r\n                <div className={\"form-control\" + ((submitted && !password) ? ' error' : ' ')}>\r\n                    <label htmlFor=\"password\">Password</label>\r\n                    <input name=\"password\" value={password} onChange={handleChange} type=\"password\" id=\"password-login\" placeholder=\"Enter password\" />\r\n                    <small>Error password !</small>\r\n                </div>\r\n                <button type=\"submit\">Submit</button>\r\n               \r\n            </form>\r\n            <div className=\"group\">\r\n                <Link to=\"/\" className=\"btn-link\">Back</Link>\r\n                <Link to=\"/register\" className=\"btn-link\">Register</Link>\r\n                \r\n            </div>\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default Login;"],"sourceRoot":""}