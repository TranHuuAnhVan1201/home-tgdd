(this.webpackJsonpprouducts=this.webpackJsonpprouducts||[]).push([[7],{106:function(e,t,c){"use strict";c.r(t);var n=c(3),r=c(19),a=c.n(r),o=c(23),s=c(29),i=c(31),l=c(5),u=c(30),d=c(27),p=c.n(d),h=c(0),j=c(28),m=c(2),b=(c(107),c(77));t.default=function(e){var t=Object(j.c)((function(e){return e.GetProductDatabase}));console.log(t);var c=Object(m.f)(),r=Object(j.b)(),d=Object(h.useState)(!1),O=Object(u.a)(d,2),f=O[0],g=O[1],x=Object(h.useState)(!1),v=Object(u.a)(x,2),y=(v[0],v[1]),_=Object(h.useState)(""),I=Object(u.a)(_,2),D=I[0],N=I[1],C=Object(h.useState)({list:[],path:[],listImage:[],productID:[]}),k=Object(u.a)(C,2),E=k[0],w=k[1],F=Object(h.useState)({name:"",quantity_in_stock:0,price:0,description:"",category_id:5,htx_id:7,user_id:12,isDeleted:1,ID_Product:300,id_Image:"",link_img:"https://res.cloudinary.com/cv-thav-herokuapp-com/image/upload/v1615482832/laptop/lwms3vb9kvur0juw4l8y.jpg"}),P=Object(u.a)(F,2),S=P[0],q=P[1];console.log(S);var T=Object(h.useState)([]),G=Object(u.a)(T,2),U=G[0];G[1],console.log(U),Object(h.useEffect)((function(){M(),0!==t.numberCart&&q(t.edit)}),[E.productID,t.numberCart]);var A=function(e){var t=e.target,c=t.name,n=t.value;q((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(i.a)({},c,n))}))},J=function(){var e=Object(s.a)(a.a.mark((function e(t){var c,n,r,s,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.target.files,(n=new FormData).append("file",c[0]),n.append("upload_preset","laptop"),g(!0),e.next=7,fetch("https://api.cloudinary.com/v1_1/cv-thav-herokuapp-com/image/upload",{method:"POST",body:n});case 7:return r=e.sent,e.next=10,r.json();case 10:return s=e.sent,N(s.secure_url),g(!1),i={type:"image",url:"".concat(s.secure_url)},e.next=16,p.a.post("http://localhost:4333/product/add",i).then((function(e){console.log("Post Image success"),w(Object(l.a)(Object(l.a)({},E),{},{list:[].concat(Object(o.a)(E.list),Object(o.a)(t.target.files)),path:[].concat(Object(o.a)(E.path),["".concat(s.secure_url)]),listImage:[].concat(Object(o.a)(E.listImage),["".concat(e.data.image)]),userID:12}))}),(function(e){console.log(e)}));case 16:e.sent;case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("http://localhost:4333/product/adds",S).then((function(e){console.log("Post product success"),w(Object(l.a)(Object(l.a)({},E),{},{productID:[].concat(Object(o.a)(E.productID),[e.data.product])}))}),(function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){E.productID.length>0&&E.listImage.forEach((function(e,t){console.log(e);var c={image_id:parseInt(e),product_image:E.productID,main_image:0===t?1:0};console.log(c),p.a.post("http://localhost:4333/product/connect",c).then((function(e){console.log("data post connect img to product success"),console.log(e)}),(function(e){console.log(e)}))}))},W=function(){var e=Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:alert("c\u1eadp nh\u1eadp"),p.a.put("http://localhost:4333/product/update/".concat(S.id),S).then((function(e){console.log("Update success !"),c.push("/admin/product"),r(b.b())}),(function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{className:"checkout up-img",children:Object(n.jsx)("section",{children:Object(n.jsxs)("form",{id:"form",className:"form",onSubmit:function(e){e.preventDefault(),y(!0),0===t.numberCart?(L(),M()):(console.log("cap nhap"),W())},children:[Object(n.jsxs)("div",{className:"column about",children:[Object(n.jsx)("h2",{children:"Th\xf4ng tin S\u1ea3n ph\u1ea9m"}),Object(n.jsxs)("div",{className:"form-control",children:[Object(n.jsx)("label",{htmlFor:"name",children:"NAME"}),Object(n.jsx)("input",{type:"text",id:"name",name:"name",value:S.name,onChange:A,placeholder:"Nh\u1eadp s\u1ed1 name"}),Object(n.jsx)("small",{children:"Error message"})]}),Object(n.jsxs)("div",{className:"form-control",children:[Object(n.jsx)("label",{htmlFor:"quantity_in_stock",children:"quantity in Stock"}),Object(n.jsx)("input",{type:"number",name:"quantity_in_stock",value:S.quantity_in_stock,onChange:A,placeholder:"Nh\u1eadp \u0111\u1ecba ch\u1ec9 chi ti\u1ebft"}),Object(n.jsx)("small",{children:"Error message"})]}),Object(n.jsxs)("div",{className:"form-control",children:[Object(n.jsx)("label",{htmlFor:"price",children:"Price"}),Object(n.jsx)("input",{type:"number",id:"price",name:"price",value:S.price,onChange:A,placeholder:"Nh\u1eadp Gi\xe1"}),Object(n.jsx)("small",{children:"Error message"})]}),Object(n.jsxs)("div",{className:"form-control",children:[Object(n.jsx)("label",{htmlFor:"description",children:"Description"}),Object(n.jsx)("input",{type:"text",id:"description",name:"description",value:S.description,onChange:A,placeholder:"Nh\u1eadp m\xf4 t\u1ea3"}),Object(n.jsx)("small",{children:"Error message"})]}),Object(n.jsxs)("div",{className:"form-control",children:[Object(n.jsx)("label",{htmlFor:"category_id",children:"Category ID"}),Object(n.jsx)("input",{type:"number",id:"category_id",name:"category_id",value:S.category_id,onChange:A,placeholder:"Nh\u1eadp Category ID"}),Object(n.jsx)("small",{children:"Error message"})]}),Object(n.jsxs)("div",{className:"form-control",children:[Object(n.jsx)("label",{htmlFor:"htx_id",children:"HTX_ID"}),Object(n.jsx)("input",{type:"number",id:"htx_id",name:"htx_id",value:S.htx_id,onChange:A,placeholder:"Nh\u1eadp Category ID"}),Object(n.jsx)("small",{children:"Error message"})]}),Object(n.jsxs)("div",{className:"form-control",children:[Object(n.jsx)("label",{htmlFor:"user_id",children:"USER_ID"}),Object(n.jsx)("input",{type:"number",id:"user_id",name:"user_id",value:S.user_id,onChange:A,placeholder:"Nh\u1eadp Category ID"}),Object(n.jsx)("small",{children:"Error message"})]}),Object(n.jsxs)("div",{className:"form-control",children:[Object(n.jsx)("label",{htmlFor:"isDeleted",children:"Delete_ID"}),Object(n.jsx)("input",{type:"number",id:"isDeleted",name:"isDeleted",value:S.isDeleted,onChange:A,placeholder:"Nh\u1eadp isDeleted"}),Object(n.jsx)("small",{children:"Error message"})]}),Object(n.jsxs)("div",{className:"form-control",children:[Object(n.jsx)("label",{htmlFor:"ID_Product",children:"ID_Product"}),Object(n.jsx)("input",{type:"number",id:"ID_Product",name:"ID_Product",value:S.ID_Product,onChange:A,placeholder:"Nh\u1eadp ID_Product"}),Object(n.jsx)("small",{children:"Error message"})]}),Object(n.jsxs)("div",{className:"form-control",children:[Object(n.jsx)("label",{htmlFor:"id_Image",children:"ID_IMAGE"}),Object(n.jsx)("input",{type:"text",id:"id_Image",name:"id_Image",value:S.id_Image,onChange:A,placeholder:"Nh\u1eadp Category ID"}),Object(n.jsx)("small",{children:"Error message"})]})]}),Object(n.jsxs)("div",{className:"column dividing",children:[Object(n.jsx)("input",{type:"file",name:"file",multiple:!0,placeholder:"Upload an Image !",onChange:J}),Object(n.jsx)("h3",{children:"Loadding"}),f?Object(n.jsx)("h3",{children:"Loadding ..."}):Object(n.jsx)("img",{src:"".concat(D),style:{width:"300px",height:"300px",objectFit:"cover"},alt:"test"}),Object(n.jsx)("h3",{children:"album"}),Object(n.jsx)("div",{style:{display:"flex",maxWidth:"1250px",margin:"0 auto",flexWrap:"wrap"},children:E.path?E.path.map((function(e,t){return Object(n.jsx)("li",{style:{padding:"12px 12px 0 0"},children:Object(n.jsx)("img",{src:e,style:{width:"300px",height:"300px",objectFit:"cover",display:"block"},alt:"123"})},t)})):null})]}),Object(n.jsxs)("div",{className:"column order",children:[Object(n.jsx)("h2",{children:"Upload"}),Object(n.jsx)("button",{className:"submit order",type:"submit",children:0===t.numberCart?"\u0110\u0103ng s\u1ea3n ph\u1ea9m":"S\u1eeda s\u1ea3n ph\u1ea9m"})]})]})})})}},107:function(e,t,c){},77:function(e,t,c){"use strict";c.d(t,"a",(function(){return o})),c.d(t,"h",(function(){return s})),c.d(t,"c",(function(){return i})),c.d(t,"d",(function(){return l})),c.d(t,"g",(function(){return u})),c.d(t,"f",(function(){return d})),c.d(t,"e",(function(){return p})),c.d(t,"i",(function(){return h})),c.d(t,"b",(function(){return j}));var n=c(4),r=c(27),a=c.n(r);var o=function(e){return{type:n.i,id:e}},s=function(){return{type:n.g}},i=function(e){return{type:n.a,payload:e}},l=function(e){return{type:n.f,payload:e}},u=function(e){return{type:n.j,payload:e}},d=function(e){return{type:n.e,payload:e}},p=function(e){return{type:n.c,bill_id:e}},h=function(e){return{type:n.d,user_id:e}},j=function(){return function(e){return(t="product",c="GET",r=null,a()({method:c,headers:{"Content-Type":"application/json"},url:"".concat(n.b,"/").concat(t),data:r})).then((function(t){e(m(t.data))}));var t,c,r}},m=function(e){return{type:n.k,dataProduct:e}}}}]);
//# sourceMappingURL=7.369543e7.chunk.js.map