{"version":3,"sources":["app/components/login/Login.js"],"names":["Login","props","useForm","register","errors","handleSubmit","reset","setValue","style","width","margin","onSubmit","data","e","axios","post","then","rs","token","access","decoded","jwt_decode","role","localStorage","setItem","history","push","window","setTimeout","location","reload","bind","console","log","err","target","className","htmlFor","type","name","ref","required","id","color","username","password"],"mappings":"mKAoDeA,UAhDf,SAAeC,GAAQ,IAAD,EAC0CC,cAApDC,EADU,EACVA,SAAUC,EADA,EACAA,OAAyBC,GADzB,EACQC,MADR,EACeC,SADf,EACyBF,cAqB3C,OACI,qBAAKG,MAAO,CAAEC,MAAO,MAAOC,OAAQ,YAApC,SACI,uBAAMC,SAAUN,GArBP,SAACO,EAAMC,GACpBC,IAAMC,KAAK,iEAAkEH,GAAMI,MAAK,SAACC,GACrF,IAAMC,EAAQD,EAAGL,KAAKO,OAClBC,EAAUC,YAAWH,GACJ,UAAjBE,EAAQE,OACRC,aAAaC,QAAQ,QAASN,GAC9BjB,EAAMwB,QAAQC,KAAK,UACnBC,OAAOC,WAAWD,OAAOE,SAASC,OAAOC,KAAKJ,OAAOE,UAAU,KAE9C,SAAjBT,EAAQE,OACRC,aAAaC,QAAQ,aAAcN,GACnCjB,EAAMwB,QAAQC,KAAK,KACnBC,OAAOC,WAAWD,OAAOE,SAASC,OAAOC,KAAKJ,OAAOE,UAAU,KAEnEG,QAAQC,IAAIf,MACb,SAACgB,GACArB,EAAEsB,OAAO7B,cAKT,UACI,sBAAK8B,UAAU,aAAf,UACI,uBAAOC,QAAQ,QAAf,uBACA,uBAAOC,KAAK,OAAOC,KAAK,WAAWC,IAAKrC,EAAS,CAAEsC,UAAU,IAASL,UAAU,eAAeM,GAAG,UAClG,uBAAOA,GAAG,YAAYlC,MAAO,CAAEmC,MAAO,OAAtC,SACKvC,EAAOwC,UAAY,+EAG5B,sBAAKR,UAAU,aAAf,UACI,uBAAOC,QAAQ,MAAf,uBACA,uBAAOC,KAAK,WAAWC,KAAK,WAAWC,IAAKrC,EAAS,CAAEsC,UAAU,IAASL,UAAU,eAAeM,GAAG,QACtG,uBAAOA,GAAG,YAAYlC,MAAO,CAAEmC,MAAO,OAAtC,SACKvC,EAAOyC,UAAY,mEAG5B,qBAAKT,UAAU,WAAf,SACI,kCAAO,uBAAOE,KAAK,aAAnB,oBAEJ,wBAAQA,KAAK,SAASF,UAAU,kBAAhC","file":"static/js/17.14c1f961.chunk.js","sourcesContent":["import React from 'react';\r\nimport axios from \"axios\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport { useForm } from 'react-hook-form';\r\nfunction Login(props) {\r\n    const { register, errors, reset, setValue, handleSubmit } = useForm();\r\n\r\n    const onSubmit = (data, e) => {\r\n        axios.post('http://phucnb-django-example.herokuapp.com/api/user/auth/login', data).then((rs) => {\r\n            const token = rs.data.access;\r\n            var decoded = jwt_decode(token);\r\n            if (decoded.role === 'admin') {\r\n                localStorage.setItem(\"token\", token);   \r\n                props.history.push('/admin');\r\n                window.setTimeout(window.location.reload.bind(window.location),10);\r\n            }\r\n            if (decoded.role === 'user') {\r\n                localStorage.setItem(\"token-user\", token);   \r\n                props.history.push('/');\r\n                window.setTimeout(window.location.reload.bind(window.location),10);\r\n            }\r\n            console.log(token);\r\n        }, (err) => {\r\n            e.target.reset();\r\n        })\r\n    }\r\n    return (\r\n        <div style={{ width: \"60%\", margin: \"0px auto\" }}>\r\n            <form onSubmit={handleSubmit(onSubmit)}>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"email\">Username:</label>\r\n                    <input type=\"text\" name=\"username\" ref={register({ required: true })} className=\"form-control\" id=\"email\" />\r\n                    <small id=\"emailHelp\" style={{ color: \"red\" }}>\r\n                        {errors.username && \"Vui lòng nhập giá trị tài khoản bằng admin\"}\r\n                    </small>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"pwd\">Password:</label>\r\n                    <input type=\"password\" name=\"password\" ref={register({ required: true })} className=\"form-control\" id=\"pwd\" />\r\n                    <small id=\"emailHelp\" style={{ color: \"red\" }}>\r\n                        {errors.password && \"Vui lòng nhập mật khẩu bằng vnpt@123\"}\r\n                    </small>\r\n                </div>\r\n                <div className=\"checkbox\">\r\n                    <label><input type=\"checkbox\" /> Remember me</label>\r\n                </div>\r\n                <button type=\"submit\" className=\"btn btn-default\">Submit</button>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;"],"sourceRoot":""}